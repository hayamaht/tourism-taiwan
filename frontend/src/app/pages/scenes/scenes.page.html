<div class="sticky top-0 z-10 bg-white drop-shadow">
  <div class="space-y-1 p-1 sm:flex sm:space-y-0 ">
    <div class="flex items-center space-x-2 justify-evenly p-2">
      <span class="material-symbols-outlined text-2xl text-secondary">
        tour
      </span>
      <form [formGroup]="form" class="space-x-1">
        <select id="type" name="type" title="type"
          formControlName="type"
          (change)="onTypeChange($event)"
          class="select select-sm select-bordered leading-3 min-w-min max-w-xs">
          <option value="" disabled>- 類型 -</option>
          <option *ngFor="let t of typesTW"
            value="{{t[0]}}" >
            {{ t[1] }}
          </option>
        </select>
        <select id="city" name="city" title="city"
          formControlName="city"
          (change)="onCityChange($event)"
          class="select select-sm select-bordered leading-3 min-w-min max-w-xs">
          <option value="" selected disabled>- 城市 -</option>
          <option *ngFor="let c of citiesTW"
            [value]="c[0]"
          >{{ c[1] }}</option>
        </select>
      </form>
    </div>
    <div class="text-center sm:text-right sm:flex-1">
      <ng-container *ngIf="type && city">
        <app-pagination [total]="totalPages"
        [page]="page" [selectedPage]="page"
      ></app-pagination>
      </ng-container>

    </div>
  </div>
</div>

<section class="container mx-auto my-4">
  <ng-template #loading>
    <span class="loading loading-spinner"></span>
  </ng-template>
  <ng-container *ngIf="randomSpots$|async as spots; else loading">
    <ng-template #noData></ng-template>
    <ng-container *ngIf="spots.length > 0; else noData">
      <h2 class="text-2xl font-bold">{{ title }}</h2>

      <div class="m-4 grid grid-cols-1 md:grid-cols-4 gap-4">
        <ng-container *ngFor="let spot of spots; let i=index;">
          <app-card-spot [type]="spot._type" [spot]="spot"
            [ngClass]="{
              'md:col-span-3': i === 0,
              'md:col-start-2': i=== 13,
              'md:col-end-5': i=== 13,
              'md:col-span-2': i === 6 || i === 7,
            }"
            class="transition ease-in-out duration-100
            drop-shadow-xl hover:-translate-x-1 hover:-translate-y-1"></app-card-spot>
        </ng-container>
      </div>
    </ng-container>
  </ng-container>

  <ng-container *ngIf="spots$|async as spots;else loading">
    <ng-template #noData></ng-template>
    <ng-container *ngIf="spots.length > 0; else noData">
      <div class="m-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <ng-container *ngFor="let spot of spots">
          <app-card-spot [type]="spot._type" [spot]="spot"
            class="transition ease-in-out duration-100
            drop-shadow-xl hover:-translate-x-1 hover:-translate-y-1"></app-card-spot>
        </ng-container>
      </div>
    </ng-container>
  </ng-container>
</section>
